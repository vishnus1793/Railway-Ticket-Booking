import{r as l,j as r}from"./index-Bv--mxmV.js";import{C as b}from"./CCard-DPOmqQe0.js";import{C as f}from"./CCardHeader-BTXHZJH3.js";import{C as w}from"./CCardBody-HjSUeiq8.js";import{C as N,a as S,b as h,c as o,d as y,e as c}from"./CTable-g_ZgT54O.js";import{C as T,a as g,b as R,c as p}from"./DefaultLayout-27NUAxa5.js";import"./index.esm-DZKNO_gL.js";import"./cil-user-Ddrdy7PS.js";import"./cil-lock-locked-DmxpJbVL.js";const B=()=>{const[a,d]=l.useState(null);l.useEffect(()=>{(async()=>{try{const e=await(await fetch("https://irctc-indian-railway-pnr-status.p.rapidapi.com/getPNRStatus/8319961705",{method:"GET",headers:{"x-rapidapi-key":"f803adb7camsh82b2ace449d051dp122a03jsndb3bf731332c","x-rapidapi-host":"irctc-indian-railway-pnr-status.p.rapidapi.com"}})).json();d(e)}catch(n){console.error("Error fetching the PNR status:",n),d({error:"Error fetching PNR status"})}})()},[]);const u=t=>{const n=typeof t!="object"?JSON.parse(t):t;let e="";return e+=`Passenger Name,Status,Coach,Seat
`,n.forEach(i=>{const C=[i.name||"N/A",i.current_status,i.coach_position||"N/A",i.berth_number||"N/A"].join(",");e+=C+`
`}),e},j=()=>{if(!a||!a.passengers)return;const t=u(a.passengers),n=new Blob([t],{type:"text/csv"}),e=window.URL.createObjectURL(n),s=document.createElement("a");s.setAttribute("href",e),s.setAttribute("download",`pnr_status_${a.pnr}.csv`),s.click()},m=()=>{if(!a)return;const t=JSON.stringify(a,null,2),n=new Blob([t],{type:"application/json"}),e=window.URL.createObjectURL(n),s=document.createElement("a");s.setAttribute("href",e),s.setAttribute("download",`pnr_status_${a.pnr}.json`),s.click()},x=t=>{if(!t||t.error)return r.jsx("p",{children:t?t.error:"Loading..."});const n=t.passengers||[];return r.jsxs(r.Fragment,{children:[r.jsxs(N,{striped:!0,hover:!0,children:[r.jsx(S,{children:r.jsxs(h,{children:[r.jsx(o,{children:"#"}),r.jsx(o,{children:"Passenger Name"}),r.jsx(o,{children:"Status"}),r.jsx(o,{children:"Coach"}),r.jsx(o,{children:"Seat"})]})}),r.jsx(y,{children:n.map((e,s)=>r.jsxs(h,{children:[r.jsx(c,{children:s+1}),r.jsx(c,{children:e.name||"N/A"}),r.jsx(c,{children:e.current_status}),r.jsx(c,{children:e.coach_position||"N/A"}),r.jsx(c,{children:e.berth_number||"N/A"})]},s))})]}),r.jsxs(T,{children:[r.jsx(g,{color:"primary",children:"Download"}),r.jsxs(R,{children:[r.jsx(p,{onClick:j,children:"Download as CSV"}),r.jsx(p,{onClick:m,children:"Download as JSON"})]})]})]})};return r.jsx(r.Fragment,{children:r.jsxs(b,{children:[r.jsx(f,{children:"PNR Status"}),r.jsx(w,{children:a?x(a):r.jsx("p",{children:"Loading..."})})]})})};export{B as default};
